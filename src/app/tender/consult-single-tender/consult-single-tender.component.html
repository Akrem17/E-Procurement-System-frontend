<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<div class="container" *ngIf="tender">
    <div class="card">
        <div class="card-body">

            <div class="row">
                <div class="one">
                    <h1>Tender details</h1>
                </div>
               
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="three">
                        <h1>Tender Information</h1>

                    </div>
                    <br>
                    <div class="table-responsive">
                        <table  class="table table-striped table-product">
                            <tbody>
                                <tr>
                                    <td class="bold" width="400">Name : </td>
                                    <td *ngIf="!editForm">{{tender.name}}</td>

                                    <td *ngIf="editForm"><input value={{tender.name}}> </td>
                                </tr>
                                <tr>
                                    <td class="bold">Business Kind : </td>
                                    <td>{{tender.businessKind}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Financing : </td>
                                    <td>{{tender.financing}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Budget : </td>
                                    <td>{{tender.budget}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Start Date : </td>
                                    <td>{{tender.startDate}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Deadline : </td>
                                    <td>{{tender.deadLine}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Evaluation Method : </td>
                                    <td>{{tender.evaluationMethod}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Departement : </td>
                                    <td>{{tender.departement}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Country : </td>
                                    <td>{{tender.addressReceipt.countryName}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">City : </td>
                                    <td>{{tender.addressReceipt.city}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Postal Code : </td>
                                    <td>{{tender.addressReceipt.postalCode}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Street : </td>
                                    <td>{{tender.addressReceipt.street1}}</td>
                                </tr>

                            </tbody>
                        </table>
                        <button mat-button >Save</button>
                    </div>

         
                    <div class="three">
                        <h1>Representative </h1>
                    </div>
                    <br>
                    <div class="table-responsive">
                   
                        <table class="table table-striped table-product">
                            <tbody>
                                <tr>
                                    <td class="bold" width="400">Name</td>
                                    <td>{{tender.responsible.name}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Social Security Number</td>
                                    <td>{{tender.responsible.socialSecurityNumber}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Position</td>
                                    <td>{{tender.responsible.position}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Social Security Number Date</td>
                                    <td>{{tender.responsible.socialSecurityNumberDate}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Phone</td>
                                    <td>{{tender.responsible.phone}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Email</td>
                                    <td>{{tender.responsible.email}}</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div class="three">
                        <h1>Institute </h1>
                    </div>
                    <br>
                    <div class="table-responsive">
                  

                        <table class="table table-striped table-product">
                            <tbody>
                                <tr>
                                    <td class="bold" width="400">Name</td>
                                    <td>{{tender.institute.nameFr}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Type Of Institute</td>
                                    <td>{{tender.institute.typeOfInstitute}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Area Type</td>
                                    <td>{{tender.institute.areaType}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Representative Name</td>
                                    <td>{{tender.institute.representativeName}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Phone</td>
                                    <td>{{tender.responsible.phone}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Fax</td>
                                    <td>{{tender.institute.fax}}</td>
                                </tr>
                                <tr>
                                    <td class="bold">Email</td>
                                    <td>{{tender.institute.notificationEmail}}</td>
                                </tr>


                            </tbody>
                        </table>
                    </div>


                    <div class="three">
                        <h1>Classifications</h1>

                    </div>
                    <div style="margin-top: 30px;" class="row" *ngIf="tenderClassification.length>0">
                        <div class="col-md-4" *ngFor="let classifciation of tenderClassification">

                            <div style="margin-bottom: 30px;">
                                <app-custom-card [title]="classifciation.name" [subtitle]="classifciation.amount"
                                    [actions]="classifciation.description"></app-custom-card>
                            </div>

                        </div>

                        <div class="mid">
                            <button mat-button mat-raised-button #tooltip="matTooltip"
                                matTooltip="See more classifications" (click)="loadMoreClassification()"
                                matTooltipHideDelay="250" style="width: 200px; margin-top: 60px;">See more</button>

                        </div>

                    </div>



                    <div class="three">
                        <h1>Specifications</h1>

                    </div>
                
                    <div style="margin-top: 30px;" class="table-responsive">
                        <mat-list>
                            <div mat-subheader>Specifications:</div>
                            <mat-list-item *ngFor="let specification of tender.specifications">
                                <mat-icon   (click)="downloadPDF(specification.id)" mat-list-icon>picture_as_pdf</mat-icon>

                                <a  href="\" #tooltip="matTooltip" matTooltip="Click to downlaod" (click)="downloadPDF(specification.id)">
                                <div mat-line>{{specification.fileName}}</div>
                                <div mat-line>{{niceBytes(specification.fileSize)}}</div>
                            </a>

                            </mat-list-item>
                            <!-- <mat-list-item>
                                <mat-icon mat-list-icon>picture_as_pdf</mat-icon>
                                <div mat-line>Specification1</div>
                                <div mat-line>13Mb </div>
                            </mat-list-item>
                            <mat-divider></mat-divider>
                            <div mat-subheader>Other files</div>
                            <mat-list-item>
                                <mat-icon mat-list-icon>note</mat-icon>
                                <div mat-line>Notes</div>
                                <div mat-line> 6Mb </div>
                            </mat-list-item> -->
                        </mat-list>

                    </div>

                    <div class="three">
                        <h1>Participates</h1>

                    </div>

                    <div style="margin-top: 30px;" class="table-responsive">
                 

                        
      
  <table class="table" >
    <thead>
      <tr>
        <th scope="col">Supplier Name</th>
        <th scope="col">Category</th>
        <th scope="col">Accepted</th>
        <th scope="col">Details</th>
        
      </tr>
    </thead>
    <tbody>
      <tr >
        <td data-label="Account">SOBIG</td>
        <td data-label="Due Date">Abed Elkader Ben Hlima</td>
        <td data-label="Amount">Not yet</td>
       <td data-label="Period">  <a class="mat-button" ><i class="fas fa-plus"></i> Details</a> </td>

      </tr>


      <tr>
        <td data-label="Account">Star MÃ©canique</td>
        <td data-label="Due Date">Abed Elkader Ben Hlima</td>
        <td data-label="Amount">Not yet</td>
       <td data-label="Period">  <a class="mat-button" ><i class="fas fa-plus"></i> Details</a> </td>

      </tr>
      <tr *ngFor="let offer of data">
        <td data-label="Account">{{offer.supplier.supplierName}}</td>
        <td data-label="Due Date">{{offer.supplier.category}}</td>
    
        <td *ngIf="offer.isAccepted==null" data-label="Amount">Not reviewed yet</td>
        <td *ngIf="offer.isAccepted==false" data-label="Amount">Rejected</td>
        <td *ngIf="offer.isAccepted==true" data-label="Amount">Accepted</td>

       <td data-label="Period">  <a  #tooltip="matTooltip" matTooltip="See offer details"  href="offers/{{offer.id}}" class="mat-button" ><i class="fas fa-plus"></i> Details</a> </td>

      </tr>
    </tbody>
    
  </table>
  <div style="float: left; margin-bottom: 10px !important;">   <button (click)="extractResult()">Extract result</button></div>

                        <mat-paginator aria-label="Select page" [pageIndex]="pageNo" showFirstLastButtons [length]=totalRecords [pageSize]=itemPerPage [pageSizeOptions]="[1,5, 10, 25, 100]"
                        aria-label="Select page" showFirstLastButtons (page)="onChangePage($event)">

                        </mat-paginator>
                    </div>
                    <div class="mid" *ngIf="!winner && userType=='supplier'" >
                        <a mat-button mat-raised-button #tooltip="matTooltip" matTooltip="Participate to tender"
                        href="offer/add/{{tender.id}}"tender.id matTooltipHideDelay="250"
                            style="width: 200px; margin-top: 60px;" >Participate</a>
                        <button mat-button mat-raised-button #tooltip="matTooltip" matTooltip="Repport the tender"
                            (click)="loadMoreClassification()" matTooltipHideDelay="250"
                            style="width: 200px; margin-top: 60px;">Repport</button>
                    </div>
                    <div class="mid" *ngIf="userType=='citizen'" >
                      
                        <button mat-button mat-raised-button #tooltip="matTooltip" matTooltip="Repport the tender"
                            routerLink="information" matTooltipHideDelay="250"
                            style="width: 200px; margin-top: 60px;">Ask for information</button>
                    </div>
                    <div class="three" *ngIf="winner">
                        <h1>Winner</h1>
                    </div>
                        <a *ngIf="winner" href="offers/{{winner.id}}">
                        <div  style="margin-bottom: 30px;">
                            <app-custom-card [title]="winner.name" [subtitle]="winner.totalMontant"
                                [actions]="winner.name"></app-custom-card>
                        </div>
                    </a>
                   

                </div>
            </div>
        </div>
    </div>
</div>